rules:
  # prevent any k8s.io/kubernetes/pkg imports outside of this package
  # Packages are used in the test
  - selectorRegexp: k8s[.]io/kubernetes/pkg/
    allowedPrefixes:
      - k8s.io/kubernetes/pkg/api/v1/pod
      - k8s.io/kubernetes/pkg/apis/extensions
      - k8s.io/kubernetes/pkg/apis/scheduling
      - k8s.io/kubernetes/pkg/apis/core/helper/qos
      - k8s.io/kubernetes/pkg/apis/core
      - k8s.io/kubernetes/pkg/apis/storage/util
      - k8s.io/kubernetes/pkg/apis/apps
      - k8s.io/kubernetes/pkg/apis/extensions
      - k8s.io/kubernetes/pkg/apis/batch
      - k8s.io/kubernetes/pkg/apis/rbac/v1
      - k8s.io/kubernetes/pkg/client/conditions
      - k8s.io/kubernetes/pkg/cluster/ports
      - k8s.io/kubernetes/pkg/controller/daemon
      - k8s.io/kubernetes/pkg/controller/volume/events
      - k8s.io/kubernetes/pkg/controller/deployment/util
      - k8s.io/kubernetes/pkg/controller
      - k8s.io/kubernetes/pkg/controller/replication
      - k8s.io/kubernetes/pkg/controller/daemon
      - k8s.io/kubernetes/pkg/controller/replicaset
      - k8s.io/kubernetes/pkg/controller/job
      - k8s.io/kubernetes/pkg/kubelet/events
      - k8s.io/kubernetes/pkg/kubelet/util/format
      - k8s.io/kubernetes/pkg/kubelet/sysctl
      - k8s.io/kubernetes/pkg/kubelet/dockershim/metrics
      - k8s.io/kubernetes/pkg/kubelet/metrics
      - k8s.io/kubernetes/pkg/kubelet/apis/config
      - k8s.io/kubernetes/pkg/kubelet/apis/config/scheme
      - k8s.io/kubernetes/pkg/kubelet/images
      - k8s.io/kubernetes/pkg/kubelet
      - k8s.io/kubernetes/pkg/kubelet/runtimeclass/testing
      - k8s.io/kubernetes/pkg/kubemark
      - k8s.io/kubernetes/pkg/quota/v1/evaluator/core
      - k8s.io/kubernetes/pkg/registry/core/service/portallocator
      - k8s.io/kubernetes/pkg/scheduler/util
      - k8s.io/kubernetes/pkg/scheduler/apis/config
      - k8s.io/kubernetes/pkg/util/slice
      - k8s.io/kubernetes/pkg/util/labels
      - k8s.io/kubernetes/pkg/volume/util
  # prevent any k8s.io/kubernetes/test/ imports outside of this package
  # Packages are used in the test/
  - selectorRegexp: k8s[.]io/kubernetes/test/
    allowedPrefixes:
      - k8s.io/kubernetes/test/conformance/testdata
      - k8s.io/kubernetes/test/e2e
      - k8s.io/kubernetes/test/e2e/apimachinery
      - k8s.io/kubernetes/test/e2e/apps
      - k8s.io/kubernetes/test/e2e/architecture
      - k8s.io/kubernetes/test/e2e/auth
      - k8s.io/kubernetes/test/e2e/autoscaling
      - k8s.io/kubernetes/test/e2e/chaosmonkey
      - k8s.io/kubernetes/test/e2e/cloud
      - k8s.io/kubernetes/test/e2e/cloud/gcp
      - k8s.io/kubernetes/test/e2e/cloud/gcp/apps
      - k8s.io/kubernetes/test/e2e/cloud/gcp/auth
      - k8s.io/kubernetes/test/e2e/cloud/gcp/common
      - k8s.io/kubernetes/test/e2e/cloud/gcp/network
      - k8s.io/kubernetes/test/e2e/cloud/gcp/node
      - k8s.io/kubernetes/test/e2e/common
      - k8s.io/kubernetes/test/e2e/common/network
      - k8s.io/kubernetes/test/e2e/common/node
      - k8s.io/kubernetes/test/e2e/common/storage
      - k8s.io/kubernetes/test/e2e/dra
      - k8s.io/kubernetes/test/e2e/dra/test-driver
      - k8s.io/kubernetes/test/e2e/dra/test-driver/app
      - k8s.io/kubernetes/test/e2e/framework
      - k8s.io/kubernetes/test/e2e/framework/auth
      - k8s.io/kubernetes/test/e2e/framework/autoscaling
      - k8s.io/kubernetes/test/e2e/framework/config
      - k8s.io/kubernetes/test/e2e/framework/daemonset
      - k8s.io/kubernetes/test/e2e/framework/debug
      - k8s.io/kubernetes/test/e2e/framework/debug/init
      - k8s.io/kubernetes/test/e2e/framework/deployment
      - k8s.io/kubernetes/test/e2e/framework/endpoints
      - k8s.io/kubernetes/test/e2e/framework/endpointslice
      - k8s.io/kubernetes/test/e2e/framework/events
      - k8s.io/kubernetes/test/e2e/framework/gpu
      - k8s.io/kubernetes/test/e2e/framework/ingress
      - k8s.io/kubernetes/test/e2e/framework/internal
      - k8s.io/kubernetes/test/e2e/framework/internal/junit
      - k8s.io/kubernetes/test/e2e/framework/internal/output
      - k8s.io/kubernetes/test/e2e/framework/internal/unittests
      - k8s.io/kubernetes/test/e2e/framework/internal/unittests/cleanup
      - k8s.io/kubernetes/test/e2e/framework/job
      - k8s.io/kubernetes/test/e2e/framework/kubectl
      - k8s.io/kubernetes/test/e2e/framework/kubelet
      - k8s.io/kubernetes/test/e2e/framework/kubesystem
      - k8s.io/kubernetes/test/e2e/framework/manifest
      - k8s.io/kubernetes/test/e2e/framework/metrics
      - k8s.io/kubernetes/test/e2e/framework/metrics/init
      - k8s.io/kubernetes/test/e2e/framework/network
      - k8s.io/kubernetes/test/e2e/framework/node
      - k8s.io/kubernetes/test/e2e/framework/node/init
      - k8s.io/kubernetes/test/e2e/framework/perf
      - k8s.io/kubernetes/test/e2e/framework/pod
      - k8s.io/kubernetes/test/e2e/framework/pod/output
      - k8s.io/kubernetes/test/e2e/framework/providers
      - k8s.io/kubernetes/test/e2e/framework/providers/aws
      - k8s.io/kubernetes/test/e2e/framework/providers/azure
      - k8s.io/kubernetes/test/e2e/framework/providers/gce
      - k8s.io/kubernetes/test/e2e/framework/providers/kubemark
      - k8s.io/kubernetes/test/e2e/framework/providers/openstack
      - k8s.io/kubernetes/test/e2e/framework/providers/vsphere
      - k8s.io/kubernetes/test/e2e/framework/pv
      - k8s.io/kubernetes/test/e2e/framework/rc
      - k8s.io/kubernetes/test/e2e/framework/replicaset
      - k8s.io/kubernetes/test/e2e/framework/resource
      - k8s.io/kubernetes/test/e2e/framework/security
      - k8s.io/kubernetes/test/e2e/framework/service
      - k8s.io/kubernetes/test/e2e/framework/skipper
      - k8s.io/kubernetes/test/e2e/framework/ssh
      - k8s.io/kubernetes/test/e2e/framework/statefulset
      - k8s.io/kubernetes/test/e2e/framework/testfiles
      - k8s.io/kubernetes/test/e2e/framework/testfiles/testdata
      - k8s.io/kubernetes/test/e2e/framework/testfiles/testdata/a
      - k8s.io/kubernetes/test/e2e/framework/timer
      - k8s.io/kubernetes/test/e2e/framework/volume
      - k8s.io/kubernetes/test/e2e/framework/websocket
      - k8s.io/kubernetes/test/e2e/instrumentation
      - k8s.io/kubernetes/test/e2e/instrumentation/common
      - k8s.io/kubernetes/test/e2e/instrumentation/logging
      - k8s.io/kubernetes/test/e2e/instrumentation/monitoring
      - k8s.io/kubernetes/test/e2e/kubectl
      - k8s.io/kubernetes/test/e2e/lifecycle
      - k8s.io/kubernetes/test/e2e/lifecycle/bootstrap
      - k8s.io/kubernetes/test/e2e/network
      - k8s.io/kubernetes/test/e2e/network/common
      - k8s.io/kubernetes/test/e2e/network/netpol
      - k8s.io/kubernetes/test/e2e/network/scale
      - k8s.io/kubernetes/test/e2e/network/scale/localrun
      - k8s.io/kubernetes/test/e2e/node
      - k8s.io/kubernetes/test/e2e/perftype
      - k8s.io/kubernetes/test/e2e/reporters
      - k8s.io/kubernetes/test/e2e/scheduling
      - k8s.io/kubernetes/test/e2e/storage
      - k8s.io/kubernetes/test/e2e/storage/csi_mock
      - k8s.io/kubernetes/test/e2e/storage/drivers
      - k8s.io/kubernetes/test/e2e/storage/drivers/csi-test
      - k8s.io/kubernetes/test/e2e/storage/drivers/csi-test/driver
      - k8s.io/kubernetes/test/e2e/storage/drivers/csi-test/mock
      - k8s.io/kubernetes/test/e2e/storage/drivers/csi-test/mock/cache
      - k8s.io/kubernetes/test/e2e/storage/drivers/csi-test/mock/service
      - k8s.io/kubernetes/test/e2e/storage/drivers/proxy
      - k8s.io/kubernetes/test/e2e/storage/external
      - k8s.io/kubernetes/test/e2e/storage/external/testdata
      - k8s.io/kubernetes/test/e2e/storage/framework
      - k8s.io/kubernetes/test/e2e/storage/podlogs
      - k8s.io/kubernetes/test/e2e/storage/testsuites
      - k8s.io/kubernetes/test/e2e/storage/utils
      - k8s.io/kubernetes/test/e2e/storage/vsphere
      - k8s.io/kubernetes/test/e2e/testing-manifests
      - k8s.io/kubernetes/test/e2e/testing-manifests/cluster-dns
      - k8s.io/kubernetes/test/e2e/testing-manifests/dra
      - k8s.io/kubernetes/test/e2e/testing-manifests/flexvolume
      - k8s.io/kubernetes/test/e2e/testing-manifests/guestbook
      - k8s.io/kubernetes/test/e2e/testing-manifests/guestbook/legacy
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress/gce
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress/gce/static-ip-2
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress/http
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress/http2
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress/multiple-certs
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress/neg
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress/neg-clusterip
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress/neg-exposed
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress/nginx
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress/pre-shared-cert
      - k8s.io/kubernetes/test/e2e/testing-manifests/ingress/static-ip
      - k8s.io/kubernetes/test/e2e/testing-manifests/kubectl
      - k8s.io/kubernetes/test/e2e/testing-manifests/scheduling
      - k8s.io/kubernetes/test/e2e/testing-manifests/serviceloadbalancer
      - k8s.io/kubernetes/test/e2e/testing-manifests/statefulset
      - k8s.io/kubernetes/test/e2e/testing-manifests/statefulset/cassandra
      - k8s.io/kubernetes/test/e2e/testing-manifests/statefulset/cockroachdb
      - k8s.io/kubernetes/test/e2e/testing-manifests/statefulset/etcd
      - k8s.io/kubernetes/test/e2e/testing-manifests/statefulset/mysql-galera
      - k8s.io/kubernetes/test/e2e/testing-manifests/statefulset/mysql-upgrade
      - k8s.io/kubernetes/test/e2e/testing-manifests/statefulset/nginx
      - k8s.io/kubernetes/test/e2e/testing-manifests/statefulset/redis
      - k8s.io/kubernetes/test/e2e/testing-manifests/statefulset/zookeeper
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/any-volume-datasource
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/any-volume-datasource/crd
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/any-volume-datasource/volume-data-source-validator
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/external-attacher
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/external-health-monitor
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/external-health-monitor/external-health-monitor-controller
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/external-provisioner
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/external-resizer
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/external-snapshotter
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/external-snapshotter/csi-snapshotter
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/gce-pd
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/hostpath
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/hostpath/hostpath
      - k8s.io/kubernetes/test/e2e/testing-manifests/storage-csi/mock
      - k8s.io/kubernetes/test/e2e/upgrades
      - k8s.io/kubernetes/test/e2e/upgrades/apps
      - k8s.io/kubernetes/test/e2e/upgrades/auth
      - k8s.io/kubernetes/test/e2e/upgrades/autoscaling
      - k8s.io/kubernetes/test/e2e/upgrades/network
      - k8s.io/kubernetes/test/e2e/upgrades/node
      - k8s.io/kubernetes/test/e2e/upgrades/storage
      - k8s.io/kubernetes/test/e2e/windows
      - k8s.io/kubernetes/test/fixtures
      - k8s.io/kubernetes/test/soak/serve_hostnames
      - k8s.io/kubernetes/test/utils
      - k8s.io/kubernetes/test/utils/apiserver
      - k8s.io/kubernetes/test/utils/crd
      - k8s.io/kubernetes/test/utils/format
      - k8s.io/kubernetes/test/utils/image
      - k8s.io/kubernetes/test/utils/junit
      - k8s.io/kubernetes/test/utils/kubeconfig
  # External Packages are used in the network/dns_common.go path
  - selectorRegexp: k8s[.]io/kubernetes/third_party/
    allowedPrefixes:
    - k8s.io/kubernetes/third_party/forked/golang/net
